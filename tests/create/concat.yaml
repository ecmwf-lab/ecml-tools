description: "develop version of the dataset for a few days and a few variables, once data on mars is cached it should take a few seconds to generate the dataset"
dataset_status: testing
name: test-concat
config_format_version: 2

dates:
  start: 2020-12-30 00:00:00
  end: 2021-01-03 12:00:00
  frequency: 12h

options:
  group_by: monthly

common:
  mars_request: &mars_request
    expver: "0001"
    class: ea
    grid: 20./20.
    levtype: sfc
    stream: oper
    type: an
    param: [2t]

input:
  concat:
    - dates:
        start: 2020-12-30 00:00:00
        end: 2021-01-01 12:00:00
        frequency: 12h
      mars:
        <<: *mars_request
    - dates:
        start: 2021-01-02 00:00:00
        end: 2021-01-03 12:00:00
        frequency: 12h
      mars:
        <<: *mars_request

output:
  chunking: { dates: 1, ensembles: 1 }
  dtype: float32
  order_by:
    - valid_datetime
    - param_level
    - number
  statistics: param_level
  statistics_end: 2021
  remapping: 
    param_level: "{param}_{levelist}"
